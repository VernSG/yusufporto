import{ax as gt,ay as vt,az as bt,aA as jt,r as u,aB as he,aC as Me,aD as ae,u as Y,aE as Mn,s as A,F as k,aF as yt,j as e,P as fe,G as me,at as de,R as we,aG as ke,aH as L,aI as _t,ag as re,aJ as Pt,aK as kn,au as te,C as V,T as D,af as wt,m as Se,aL as St,w as Q,ao as On,B as T,d as B,y as zn,aM as Ie,ah as It,aN as Ct,U as Et,aO as Tt,aP as Dt,aQ as Rt,z as Mt,v as Ln,aR as kt,aS as Ot,aT as zt,aU as Lt,aV as ie,f as Oe,b as ze,A as At,aW as Bt,aX as Nt,aY as Wt,aZ as ee,a_ as $t,a$ as Ft,b0 as Ht,b1 as le,W as Vt,b2 as Le,b3 as F,x as U,b4 as Ut,b5 as xe,b6 as Gt,h as An,l as Bn,b7 as Kt,b8 as Xt,D as Yt,b9 as Jt,ba as qt,q as Ae,bb as Zt,bc as Qt,bd as Ue,be as ge,bf as Nn,bg as es,bh as Wn,g as $n,ar as ns,bi as ts,bj as se,bk as Fn,bl as ss,bm as os,e as as,bn as rs,bo as is,bp as Hn,bq as ls,br as cs,bs as ds,L as K,a3 as X,t as us,aa as Vn,bt as ps,bu as Un,bv as Ce,bw as Gn,bx as Kn,by as Ge,bz as hs,bA as Xn,bB as fs,bC as ms,bD as xs,bE as Be,bF as gs,bG as Ee,bH as vs,bI as bs,bJ as be,bK as js,bL as ys,bM as _s,bN as Ps,M as ws,O as Ke,bO as Ne,bP as Ss,bQ as Is,bR as Cs,bS as je,H as Es,bT as Xe,bU as Te,bV as Yn,a6 as Ts,bW as Ds,bX as Rs,bY as We,bZ as Ms,b_ as ks,b$ as Os,c0 as Jn,c1 as zs,c2 as Ls,c3 as De,c4 as As,c5 as Bs,c6 as Ns,c7 as Ws,a as $s,c8 as Fs,c9 as Hs,ca as Vs,cb as Re,cc as Us,cd as Gs,ce as Ks,cf as Ye,X as Xs,Y as Ys,cg as qn,ch as Zn,ci as Qn,cj as et,ck as Js,cl as qs,cm as Zs,cn as Qs,co as ye}from"./sanity-1641fbb5.js";import{H as eo,J as no}from"./json-inspector-af83daf6.js";function nt(t,n){var s=typeof n=="object";return new Promise(function(a,o){var l=new gt({next:function(r){a(r),l.unsubscribe()},error:o,complete:function(){s?a(n.defaultValue):o(new vt)}});t.subscribe(l)})}function to(){return bt(function(t,n){var s,a=!1;t.subscribe(jt(n,function(o){var l=s;s=o,a&&n.next([l,o]),a=!0}))})}const $e=t=>{const{actions:n,children:s,actionProps:a,onActionComplete:o}=t;return e.jsx(Fn,{onReset:o,hooks:n,args:a,children:s})},so=t=>{const{badges:n,children:s,badgeProps:a,...o}=t;return e.jsx(Fn,{...o,hooks:n,args:a,children:s})},oo=[];function ao(t){const{children:n,flatIndex:s,index:a,params:o,payload:l,siblingIndex:r}=t,{navigate:i,navigateIntent:c}=he(),d=Me(),{panes:h,expand:p}=Ae(),f=u.useMemo(()=>(d==null?void 0:d.panes)||oo,[d==null?void 0:d.panes]),g=u.useMemo(()=>h==null?void 0:h[h.length-2],[h]),m=a-1,v=u.useCallback(b=>{const y=f[m]||[],w=y[r],E=b(y,w),S=[...f.slice(0,m),E,...f.slice(m+1)],I={...d||{},panes:S};return setTimeout(()=>i(I),0),I},[m,i,f,d,r]),P=u.useCallback(b=>{v((y,w)=>[...y.slice(0,r),{...w,payload:b},...y.slice(r+1)])},[v,r]),j=u.useCallback(b=>{v((y,w)=>[...y.slice(0,r),{...w,params:b},...y.slice(r+1)])},[v,r]),x=u.useCallback(b=>{let{id:y,parentRefPath:w,type:E,template:S}=b;i({panes:[...f.slice(0,m+1),[{id:y,params:{template:S.id,parentRefPath:ss(w),type:E},payload:S.params}]]})},[m,i,f]),_=u.useMemo(()=>({index:s,groupIndex:m,siblingIndex:r,payload:l,params:o,hasGroupSiblings:f[m]?f[m].length>1:!1,groupLength:f[m]?f[m].length:0,routerPanesState:f,ChildLink:os,BackLink:as,ReferenceChildLink:rs,handleEditReference:x,ParameterizedLink:is,replaceCurrent:function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},closeCurrent:()=>{v((b,y)=>b.length>1?b.filter(w=>w!==y):b)},closeCurrentAndAfter:function(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&g&&p(g.element),i({panes:[...f.slice(0,m)]},{replace:!0})},duplicateCurrent:b=>{v((y,w)=>{const E={...w,payload:(b==null?void 0:b.payload)||w.payload,params:(b==null?void 0:b.params)||w.params};return[...y.slice(0,r),E,...y.slice(r)]})},setView:b=>{const y=Hn(o,"view");return j(b?{...y,view:b}:y)},setParams:j,setPayload:P,navigateIntent:c}),[s,m,r,l,o,f,x,j,P,c,v,g,i,p]);return e.jsx(ls.Provider,{value:_,children:n})}function ro(t,n,s,a){var o,l;const r={flex:t.left.flex+t.right.flex,width:t.left.width+t.right.width},i=(o=n.minWidth)!=null?o:Re,c=(l=s.minWidth)!=null?l:Re,d=Math.min(n.maxWidth||1/0,r.width-c),h=Math.min(s.maxWidth||1/0,r.width-i);let p=i-t.left.width;const f=t.right.width-h;p<f&&(p=f);let g=t.right.width-c;const m=d-t.left.width;g>m&&(g=m);const v=Math.min(Math.max(a,p),g),P=t.left.width+v,j=t.right.width-v,x=P/r.width*r.flex,_=j/r.width*r.flex;return{leftFlex:x,leftW:P,rightFlex:_,rightW:j}}function io(t,n){const s=[];let a=n;for(;a!==t;){const o=a.parentElement;if(!o)return s;const r=Array.from(o.childNodes).indexOf(a);if(s.unshift(r),o===t)return s;a=o}return s}const Je=[];function lo(t,n){const s=new WeakMap;for(const o of n)s.set(o,io(t,o));const a=(o,l)=>{const r=s.get(o)||Je,i=s.get(l)||Je,c=Math.max(r.length,i.length);for(let d=0;d<c;d+=1){const h=r[d]||-1,p=i[d]||-1;if(h!==p)return h-p}return 0};n.sort(a)}function co(){const t=[],n=[],s=new WeakMap,a=new Set,o={};let l=null,r=0,i=null,c=new Map,d=!1;function h(x){a.add(x),i===x&&(i=null),j()}function p(x){a.delete(x),i=x,j()}function f(x,_){return s.set(x,{..._,original:_}),n.push(x),l&&lo(l,n),p(x),()=>{const b=n.indexOf(x);b>-1&&n.splice(b,1),s.delete(x),j()}}function g(x,_,b){var y,w,E,S;const I=n.indexOf(_),R=s.get(_);if(!R)return;const M=n[I+1],O=s.get(M);if(O){if(x==="start"&&(d=!0,o.left={element:_,flex:R.flex||1,width:_.offsetWidth},o.right={element:M,flex:O.flex||1,width:M.offsetWidth},j()),x==="move"&&o.left&&o.right){c=new Map;const{leftW:C,rightW:z,leftFlex:N,rightFlex:W}=ro(o,R,O,b);c.set(_,{flex:N,width:C}),c.set(M,{flex:W,width:z}),j()}if(x==="end"){d=!1;const C=c.get(_),z=c.get(M);s.set(_,{...R,currentMinWidth:0,currentMaxWidth:(y=R.maxWidth)!=null?y:1/0,flex:(w=C==null?void 0:C.flex)!=null?w:R.flex}),s.set(M,{...O,currentMinWidth:0,currentMaxWidth:(E=R.maxWidth)!=null?E:1/0,flex:(S=z==null?void 0:z.flex)!=null?S:O.flex}),c=new Map,delete o.left,delete o.right,j()}}}function m(x){l=x}function v(x){r=x,j()}function P(x){return t.push(x),()=>{const _=t.push(x);_>-1&&t.splice(_,1)}}return{collapse:h,expand:p,mount:f,resize:g,setRootElement:m,setRootWidth:v,subscribe:P};function j(){var x,_,b,y;if(!r)return;const w=[];for(const C of n)C!==i&&w.unshift(C);i&&w.unshift(i);const E=new WeakMap,S=w.length,I=w[0],R=(S-1)*ye;let M=r-R;for(const C of w){const z=s.get(C);if(!z)continue;const N=z.currentMinWidth||z.minWidth||Re,W=C===I,ce=a.has(C),$=N>M,G=W?!1:ce||$,H=c.get(C);E.set(C,{element:C,collapsed:G,currentMinWidth:(x=H==null?void 0:H.width)!=null?x:z.currentMinWidth,currentMaxWidth:(_=H==null?void 0:H.width)!=null?_:z.currentMaxWidth,flex:(y=(b=H==null?void 0:H.flex)!=null?b:z.flex)!=null?y:1}),G?M-=ye:M-=N-ye}const O=[];for(const C of n){const z=E.get(C);z&&O.push(z)}for(const C of t)C({expandedElement:i||n[n.length-1]||null,panes:O,resizing:d})}}function uo(t){const{children:n,minWidth:s,onCollapse:a,onExpand:o,...l}=t,r=u.useMemo(()=>co(),[]),[i,c]=u.useState(null),d=xe(i),h=(d==null?void 0:d.width)||0,p=h===void 0||!s?void 0:h<s,[f,g]=u.useState({expandedElement:null,panes:[],resizing:!1});u.useEffect(()=>r.setRootElement(i),[r,i]),u.useEffect(()=>r.setRootWidth(h),[r,h]),u.useEffect(()=>r.subscribe(g),[r]),u.useEffect(()=>{p!==void 0&&(p&&a&&a(),!p&&o&&o())},[p,a,o]);const m=u.useMemo(()=>({collapse:r.collapse,collapsed:p,expand:r.expand,expandedElement:f.expandedElement,mount:r.mount,panes:f.panes,resize:r.resize,resizing:f.resizing}),[p,r,f.expandedElement,f.panes,f.resizing]);return e.jsx(cs.Provider,{value:m,children:e.jsx(ds,{"data-ui":"PaneLayout",...l,"data-collapsed":p?"":void 0,"data-resizing":f.resizing?"":void 0,"data-mounted":h?"":void 0,ref:c,children:n})})}function po(t){const{documentId:n,documentType:s,flex:a}=t,{collapsed:o}=Oe(),{closeInspector:l,inspector:r}=L(),{features:i}=Y(),c=u.useCallback(()=>{r&&l(r.name)},[l,r]);if(o||!r)return null;const d=u.createElement(r.component,{onClose:c,documentId:n,documentType:s});return i.resizablePanes?e.jsx(_s,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,maxWidth:Ps,minWidth:Ee,children:d}):e.jsx(T,{as:"aside","data-ui":"DocumentInspectorPanel",flex:a,children:d})}var ho=Object.defineProperty,fo=(t,n,s)=>n in t?ho(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,_e=(t,n,s)=>(fo(t,typeof n!="symbol"?n+"":n,s),s);class Z extends Error{constructor(n){let{message:s,context:a,helpId:o,cause:l}=n;super(s),_e(this,"cause"),_e(this,"context"),_e(this,"helpId"),this.context=a,this.helpId=o,this.cause=l}}const qe=new WeakMap;function ve(t){const n=qe.get(t);if(n)return n;const s=qs();return qe.set(t,s),s}const Ze=new WeakMap;function tt(t,n){const s=Ze.get(t)||new Map;if(s){const l=s.get(n);if(l)return l}const a=t[n];if(typeof a!="function")throw new Error("Expected property `".concat(n,"` to be a function but got ").concat(typeof a," instead."));const o=a.bind(t);return s.set(n,o),Ze.set(t,s),o}const mo=t=>!!t&&typeof(t==null?void 0:t.then)=="function",xo=t=>ae(t)?typeof t.serialize=="function":!1,go=t=>(n,s,a)=>{try{return t(n,s,a)}catch(o){throw o instanceof Z?o:new Z({message:typeof(o==null?void 0:o.message)=="string"?o.message:"",context:s,cause:o})}},vo=t=>function(){return t(...arguments).pipe(Zs(1),Qs())};function st(t){const n=go(vo(t((s,a,o)=>{if(!s)throw new Z({message:"Pane returned no child",context:a,helpId:"structure-item-returned-no-child"});return mo(s)||Us(s)?Gs(s).pipe(Ne(l=>n(l,a,o))):xo(s)?n(s.serialize(a),a,o):typeof s=="function"?n(s(a.id,a),a,o):X(s)})));return n}async function bo(t){const n=new Map,a=st(c=>(d,h,p)=>{const f=d&&"".concat(ve(d),"-").concat(h.path.join("__")),g=f&&n.get(f);if(g)return g;const m=c(d,h,p);return f&&n.set(f,m),m}),o=[[{id:"__edit__".concat(t.params.id),params:{...Hn(t.params,["id"]),type:t.params.type},payload:t.payload}]];async function l(c){let{currentId:d,flatIndex:h,intent:p,params:f,parent:g,path:m,payload:v,unresolvedPane:P,levelIndex:j,structureContext:x}=c;var _;if(!P)return[];const{id:b,type:y,...w}=f,S=await nt(a(P,{id:d,splitIndex:0,parent:g,path:m,index:h,params:{},payload:void 0,structureContext:x},h));return S.type==="document"&&S.id===b?[{panes:[...m.slice(0,m.length-1).map(I=>[{id:I}]),[{id:b,params:w,payload:v}]],depthIndex:m.length,levelIndex:j}]:(_=S.canHandleIntent)!=null&&_.call(S,p,f,{pane:S,index:h})||S.type==="documentList"&&S.schemaTypeName===y&&S.options.filter==="_type == $type"?[{panes:[...m.map(I=>[{id:I}]),[{id:f.id,params:w,payload:v}]],depthIndex:m.length,levelIndex:j}]:S.type==="list"&&S.child&&S.items?(await Promise.all(S.items.map((I,R)=>I.type==="divider"?Promise.resolve([]):l({currentId:I._id||I.id,flatIndex:h+1,intent:p,params:f,parent:S,path:[...m,I.id],payload:v,unresolvedPane:typeof S.child=="function"?tt(S,"child"):S.child,levelIndex:R,structureContext:x})))).flat():[]}const i=(await l({currentId:"root",flatIndex:0,levelIndex:0,intent:t.intent,params:t.params,parent:null,path:[],payload:t.payload,unresolvedPane:t.rootPaneNode,structureContext:t.structureContext})).sort((c,d)=>c.depthIndex===d.depthIndex?c.levelIndex-d.levelIndex:c.depthIndex-d.depthIndex)[0];return i?i.panes:o}const jo=(t,n)=>{const s=t.replace(/^__edit__/,""),{params:a,payload:o,structureContext:{resolveDocumentNode:l}}=n,{type:r,template:i}=a;if(!r)throw new Error("Document type for document with ID ".concat(s," was not provided in the router params."));let c=l({schemaType:r,documentId:s}).id("editor");return i&&(c=c.initialValueTemplate(i,o)),c.serialize()};function yo(t){var n,s;return"contextHash(".concat(JSON.stringify({id:t.id,parentId:parent&&ve(parent),path:t.path,index:t.index,splitIndex:t.splitIndex,serializeOptionsIndex:(n=t.serializeOptions)==null?void 0:n.index,serializeOptionsPath:(s=t.serializeOptions)==null?void 0:s.path}),")")}const Qe=t=>{const n={type:t.type,id:t.routerPaneSibling.id,params:t.routerPaneSibling.params||{},payload:t.routerPaneSibling.payload||null,flatIndex:t.flatIndex,groupIndex:t.groupIndex,siblingIndex:t.siblingIndex,path:t.path,paneNode:t.type==="resolvedMeta"?ve(t.paneNode):null};return"metaHash(".concat(JSON.stringify(n),")")};function ue(t){let{unresolvedPane:n,flattenedRouterPanes:s,parent:a,path:o,resolvePane:l,structureContext:r}=t;const[i,...c]=s,d=c[0],h={id:i.routerPaneSibling.id,splitIndex:i.siblingIndex,parent:a,path:[...o,i.routerPaneSibling.id],index:i.flatIndex,params:i.routerPaneSibling.params||{},payload:i.routerPaneSibling.payload,structureContext:r};try{return l(n,h,i.flatIndex).pipe(Ne(p=>{const f={type:"resolvedMeta",...i,paneNode:p,path:h.path},g=c.map((v,P)=>({type:"loading",path:[...h.path,...c.slice(P).map((_,b)=>"[".concat(v.flatIndex+b,"]"))],paneNode:null,...v}));if(!c.length)return X([f]);let m;return d!=null&&d.routerPaneSibling.id.startsWith("__edit__")?m=ue({unresolvedPane:jo,flattenedRouterPanes:c,parent:a,path:h.path,resolvePane:l,structureContext:r}):i.groupIndex===(d==null?void 0:d.groupIndex)?m=ue({unresolvedPane:n,flattenedRouterPanes:c,parent:a,path:o,resolvePane:l,structureContext:r}):m=ue({unresolvedPane:typeof p.child=="function"?tt(p,"child"):p.child,flattenedRouterPanes:c,parent:p,path:h.path,resolvePane:l,structureContext:r}),Vn(X([f,...g]),m.pipe(K(v=>[f,...v])))}))}catch(p){if(p instanceof Z&&(p.context&&console.warn("Pane resolution error at index ".concat(p.context.index).concat(p.context.splitIndex>0?" for split pane index ".concat(p.context.splitIndex):"",": ").concat(p.message).concat(p.helpId?" - see ".concat(Yn(p.helpId)):""),p),p.helpId==="structure-item-returned-no-child"))return X([]);throw p}}function _o(t){let{routerPanesStream:n,rootPaneNode:s,initialCacheState:a={cacheKeysByFlatIndex:[],flattenedRouterPanes:[],resolvedPaneCache:new Map,resolvePane:()=>Ks},structureContext:o}=t;return n.pipe(K(r=>[[{id:"root"}],...r]),K(r=>r.flatMap((c,d)=>c.map((h,p)=>({routerPaneSibling:h,groupIndex:d,siblingIndex:p}))).map((c,d)=>({...c,flatIndex:d}))),ws([]),to(),K(r=>{let[i,c]=r;for(let d=0;d<c.length;d++){const h=i[d],p=c[d];if(!we(h,p))return{flattenedRouterPanes:c,diffIndex:d}}return{flattenedRouterPanes:c,diffIndex:c.length}}),Ke((r,i)=>{const{cacheKeysByFlatIndex:c,resolvedPaneCache:d}=r,{flattenedRouterPanes:h,diffIndex:p}=i,f=c.slice(0,p+1),g=c.slice(p+1),m=new Set(f.flatMap(j=>Array.from(j))),v=g.flatMap(j=>Array.from(j)).filter(j=>!m.has(j));for(const j of v)d.delete(j);return{flattenedRouterPanes:h,cacheKeysByFlatIndex:c,resolvedPaneCache:d,resolvePane:st(j=>(x,_,b)=>{const y=x&&"".concat(ve(x),"-").concat(yo(_)),w=y&&d.get(y);if(w)return w;const E=j(x,_,b);if(!y)return E;const S=c[b]||new Set;return S.add(y),c[b]=S,d.set(y,E),E})}},a),Ne(r=>{let{flattenedRouterPanes:i,resolvePane:c}=r;return ue({unresolvedPane:s,flattenedRouterPanes:i,parent:null,path:[],resolvePane:c,structureContext:o})})).pipe(Ke((r,i)=>i.map((c,d)=>{const h=r[d];return!h||c.type!=="loading"?c:h.routerPaneSibling.id===c.routerPaneSibling.id?h:c}),[]),Ss((r,i)=>{if(r.length!==i.length)return!1;for(let c=0;c<i.length;c++){const d=r[c],h=i[c];if(Qe(d)!==Qe(h))return!1}return!0}))}function Po(){const t=u.useMemo(()=>new Is(1),[]),n=u.useMemo(()=>t.asObservable().pipe(K(a=>(a==null?void 0:a.panes)||[])),[t]),{state:s}=he();return u.useEffect(()=>{t.next(s)},[s,t]),n}function wo(){const[t,n]=u.useState();if(t)throw t;const{structureContext:s,rootPaneNode:a}=Y(),[o,l]=u.useState({paneDataItems:[],resolvedPanes:[],routerPanes:[]}),r=Po();return u.useEffect(()=>{const c=_o({rootPaneNode:a,routerPanesStream:r,structureContext:s}).pipe(K(d=>{const h=d.reduce((g,m)=>{const v=g[m.groupIndex]||[];return v[m.siblingIndex]=m.routerPaneSibling,g[m.groupIndex]=v,g},[]),p=h.length,f=d.map(g=>{var m;const{groupIndex:v,flatIndex:P,siblingIndex:j,routerPaneSibling:x,path:_}=g,b=x.id,y=h[v+1];return{active:v===p-2,childItemId:(m=y==null?void 0:y[0].id)!=null?m:null,index:P,itemId:x.id,groupIndex:v,key:"".concat(g.type==="loading"?"unknown":g.paneNode.id,"-").concat(b,"-").concat(j),pane:g.type==="loading"?se:g.paneNode,params:x.params||{},path:_.join(";"),payload:x.payload,selected:P===d.length-1,siblingIndex:j}});return{paneDataItems:f,routerPanes:h,resolvedPanes:f.map(g=>g.pane)}})).subscribe({next:d=>l(d),error:d=>n(d)});return()=>c.unsubscribe()},[a,r,s]),o}async function So(t,n,s){if(n&&s)return{id:n,type:s};if(!n&&s)return{id:Cs(),type:s};if(n&&!s){const a=await nt(t.resolveTypeForDocument(n));return{id:n,type:a}}throw new Z({message:"Neither document `id` or `type` was provided when trying to resolve intent."})}const Io={},Co=u.memo(function(){const{navigate:n}=he(),s=Me(u.useCallback(c=>{const d=typeof c.intent=="string"?c.intent:void 0;return d?{intent:d,params:ae(c.params)?c.params:Io,payload:c.payload}:void 0},[])),{rootPaneNode:a,structureContext:o}=Y(),l=Mn(),[r,i]=u.useState(null);if(r)throw r;return u.useEffect(()=>{if(s){const{intent:c,params:d,payload:h}=s;let p=!1;async function f(){const{id:g,type:m}=await So(l,typeof d.id=="string"?d.id:void 0,typeof d.type=="string"?d.type:void 0);if(p)return;const v=await bo({intent:c,params:{...d,id:g,type:m},payload:h,rootPaneNode:a,structureContext:o});p||n({panes:v},{replace:!0})}return f().catch(i),()=>{p=!0}}},[l,s,n,a,o]),null});var en=Object.freeze,Eo=Object.defineProperty,To=(t,n)=>en(Eo(t,"raw",{value:en(n||t.slice())})),nn;const Do=A.span(nn||(nn=To([`
  &:not(:last-child)::after {
    content: ' ➝ ';
    opacity: 0.5;
  }
`])));function Ro(t){return t.replace(/\(\.\.\.\)\./g,`(...)
  .`).replace(/__WEBPACK_IMPORTED_MODULE_\d+_+/g,"").replace(/___default\./g,".").replace(new RegExp(" \\(https?:\\/\\/".concat(window.location.host),"g")," (")}function Mo(t){let{error:n}=t;if(!(n instanceof Z))throw n;const{cause:s}=n,a=(s==null?void 0:s.stack)||n.stack,o=a&&!(s instanceof je)&&!n.message.includes("Module build failed:"),l=s instanceof je?s.path:[],r=s instanceof je&&s.helpId||n.helpId,i=u.useCallback(()=>{window.location.reload()},[]);return e.jsx(V,{height:"fill",overflow:"auto",padding:4,sizing:"border",tone:"critical",children:e.jsxs(Q,{children:[e.jsx(Es,{as:"h2",children:"Encountered an error while reading structure"}),e.jsxs(V,{marginTop:4,padding:4,radius:2,overflow:"auto",shadow:1,tone:"inherit",children:[l.length>0&&e.jsxs(U,{space:2,children:[e.jsx(Xe,{children:"Structure path"}),e.jsx(Te,{children:l.slice(1).map((c,d)=>e.jsx(Do,{children:c},"".concat(c,"-").concat(d)))})]}),e.jsxs(U,{marginTop:4,space:2,children:[e.jsx(Xe,{children:"Error"}),e.jsx(Te,{children:o?Ro(a):n.message})]}),r&&e.jsx(T,{marginTop:4,children:e.jsx(D,{children:e.jsx("a",{href:Yn(r),rel:"noopener noreferrer",target:"_blank",children:"View documentation"})})}),e.jsx(T,{marginTop:4,children:e.jsx(B,{text:"Reload",icon:zn,tone:"primary",onClick:i})})]})]})})}function ko(t){const{isSelected:n,pane:s,paneKey:a}=t,o=ae(s)&&s.type||null;return e.jsxs(fe,{id:a,selected:n,children:[e.jsx(ze,{title:"Unknown pane type"}),e.jsx(me,{children:e.jsx(T,{padding:4,children:typeof o=="string"?e.jsxs(D,{as:"p",muted:!0,children:["Structure item of type ",e.jsx("code",{children:o})," is not a known entity."]}):e.jsxs(D,{as:"p",muted:!0,children:["Structure item is missing required ",e.jsx("code",{children:"type"})," property."]})})})]})}function Oo(t){const n=[{ms:300,message:"Loading…"},{ms:5e3,message:"Still loading…"}],s=X(null);return Ts(...n.map(a=>{let{ms:o,message:l}=a;return s.pipe(Ds(l),Rs(o))}))}var tn=Object.freeze,zo=Object.defineProperty,Lo=(t,n)=>tn(zo(t,"raw",{value:tn(n||t.slice())})),sn;const Ao="Loading…",Bo=A(k)(sn||(sn=Lo([`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`]))),oe=u.memo(t=>{const{delay:n=300,flex:s,message:a=Oo,minWidth:o,paneKey:l,path:r,selected:i,title:c,tone:d}=t,h=u.useMemo(()=>typeof a=="function"?a(r?r.split(";"):[]):a,[a,r]),[p,f]=u.useState(()=>typeof h=="string"?h:Ao);u.useEffect(()=>{if(typeof h!="object"||typeof h.subscribe=="function")return;const x=h.subscribe(f);return()=>x.unsubscribe()},[h]);const[g,m]=u.useState(null),[v,P]=u.useState(!1);u.useEffect(()=>{if(g)return yt(()=>P(!0))},[g]);const j=e.jsxs(Bo,{align:"center","data-mounted":v?"":void 0,direction:"column",height:"fill",justify:"center",ref:m,children:[e.jsx(Ln,{muted:!0}),(c||p)&&e.jsx(T,{marginTop:3,children:e.jsx(D,{align:"center",muted:!0,size:1,children:c||p})})]});return e.jsx(fe,{flex:s,id:l,minWidth:o,selected:i,tone:d,children:e.jsx(me,{children:j})})});oe.displayName="LoadingPane";const No={component:u.lazy(()=>de(()=>import("./index-e553c86e-b4c42b2a.js"),["static/index-e553c86e-b4c42b2a.js","static/sanity-1641fbb5.js"])),document:u.lazy(()=>de(()=>import("./index-c02bc045-09deab74.js"),["static/index-c02bc045-09deab74.js","static/sanity-1641fbb5.js","static/json-inspector-af83daf6.js"])),documentList:u.lazy(()=>de(()=>import("./index-619c39ab-dd5eecab.js"),["static/index-619c39ab-dd5eecab.js","static/sanity-1641fbb5.js","static/PaneItem-bf48a1e1-f4e4b45b.js","static/json-inspector-af83daf6.js"])),list:u.lazy(()=>de(()=>import("./index-1bf5a5bd-c9ff8850.js"),["static/index-1bf5a5bd-c9ff8850.js","static/sanity-1641fbb5.js","static/PaneItem-bf48a1e1-f4e4b45b.js"]))},Wo=u.memo(function(n){const{active:s,childItemId:a,groupIndex:o,index:l,itemId:r,pane:i,paneKey:c,params:d,payload:h,path:p,selected:f,siblingIndex:g}=n,m=No[i.type]||ko;return e.jsx(ao,{flatIndex:l,index:o,params:d,payload:h,siblingIndex:g,children:e.jsx(u.Suspense,{fallback:e.jsx(oe,{paneKey:c,path:p,selected:f}),children:e.jsx(m,{childItemId:a||"",index:l,itemId:r,isActive:s,isSelected:f,paneKey:c,pane:i})})})},(t,n)=>{let{params:s={},payload:a=null,...o}=t,{params:l={},payload:r=null,...i}=n;if(!we(s,l)||!we(a,r))return!1;const c=new Set([...Object.keys(o),...Object.keys(i)]);for(const d of c)if(o[d]!==i[d])return!1;return!0});function ot(t){const{children:n,currentMinWidth:s,flex:a,minWidth:o,paneKey:l,title:r="Error",tone:i="critical"}=t;return e.jsxs(fe,{currentMinWidth:s,flex:a,id:l,minWidth:o,tone:i,children:[e.jsx(ze,{title:r}),e.jsx(me,{overflow:"auto",children:e.jsx(T,{paddingX:4,paddingY:5,children:n})})]})}function $o(t){return t==="delete"?`An error occurred while attempting to delete this document.
      This usually means that there are other documents that refers to it.`:t==="unpublish"?`An error occurred while attempting to unpublish this document.
      This usually means that there are other documents that refers to it.`:"An error occurred during ".concat(t)}function Fo(t){return t==="publish"?"The document was published":t==="unpublish"?"The document was unpublished. A draft has been created from the latest published version.":t==="discardChanges"?"All changes since last publish has now been discarded. The discarded draft can still be recovered from history":t==="delete"?"The document was successfully deleted":"Successfully performed ".concat(t," on document")}const Ho=["patch","commit"],Vo=u.memo(function(){const{push:n}=ke(),{documentId:s,documentType:a}=L(),o=_t(s,a),l=u.useRef(o),r=re();return u.useEffect(()=>{if(!o||o===l.current)return;let i;return o.type==="error"&&n({closable:!0,duration:3e4,status:"error",title:$o(o.op),description:e.jsxs("details",{children:[e.jsx("summary",{children:"Details"}),o.error.message]})}),o.type==="success"&&!Ho.includes(o.op)&&n({closable:!0,status:"success",title:Fo(o.op)}),o.type==="success"&&o.op==="delete"&&(i=setTimeout(()=>r.closeCurrentAndAfter(),0)),l.current=o,()=>clearTimeout(i)},[o,r,n]),null});function Uo(t,n,s){const a=Pt(),[o,l]=u.useState(s),r=u.useMemo(()=>a.forNamespace("desk-tool"),[a]),i=u.useMemo(()=>t?r.forNamespace(t).forKey(n):r.forKey(n),[r,t,n]);u.useEffect(()=>{const d=i.listen(s).subscribe({next:l});return()=>d==null?void 0:d.unsubscribe()},[s,n,t,i]);const c=u.useCallback(d=>{l(d),i.set(d)},[i]);return u.useMemo(()=>[o,c],[c,o])}const J={id:"parsed",title:"Parsed"},q={id:"raw",title:"Raw JSON"},Go=[J,q],pe=eo(1e3);function at(t,n){const s=pe.get(t);return s===void 0?(pe.set(t,Array.isArray(n)||ae(n)),at(t,n)):s}function Ko(t){const{path:n}=t,s=pe.get(n);s!==void 0&&pe.set(n,!s)}function rt(t){const n=window.getSelection();if(n){const s=document.createRange();n.removeAllRanges(),s.selectNodeContents(t),n.addRange(s)}}function on(t){rt(t.currentTarget)}function Xo(t){t.keyCode===65&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),rt(t.currentTarget))}function Yo(t){return ae(t)&&Ye(t._id)&&Ye(t._type)}var an=Object.freeze,Jo=Object.defineProperty,qo=(t,n)=>an(Jo(t,"raw",{value:an(n||t.slice())})),rn;const Zo=A.div(t=>{let{theme:n}=t;const{color:s,fonts:a,space:o}=n.sanity;return kn(rn||(rn=qo([`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: `,`;
      font-size: `,`px;
      line-height: `,`px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: `,`;
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: `,`;
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - `,` + 3px);
      font-size: `,`px;
      line-height: `,`px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: `,`px;
      line-height: `,`px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: `,`;
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: `,`;
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: `,`;
    }

    & .json-inspector .json-inspector__value_string {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_boolean {
      color: `,`;
    }

    & .json-inspector .json-inspector__value_number {
      color: `,`;
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `])),a.code.family,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,te(o[4]),te(o[3]),te(o[4]),a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,a.code.sizes[2].fontSize,a.code.sizes[2].lineHeight,te(o[4]/2),s.syntax.property,s.syntax.constant,te(o[3]),s.syntax.string,s.syntax.boolean,s.syntax.number)});function Qo(t){const{onChange:n,query:s}=t,a=u.useCallback(o=>n(o.target.value),[n]);return e.jsx(Xs,{icon:Ys,onChange:a,placeholder:"Search",radius:2,value:s||""})}function ea(t){const{value:n}=t,{onInspectClose:s,paneKey:a}=L(),o="".concat(a,"_inspect_"),[l,r]=Uo("desk-tool","inspect-view-preferred-view-mode-".concat(a),"parsed"),i=Go.find(h=>h.id===l),c=u.useCallback(()=>{r(J.id)},[r]),d=u.useCallback(()=>{r(q.id)},[r]);return e.jsx(We,{id:"".concat(o,"dialog"),header:Yo(n)?e.jsxs(e.Fragment,{children:["Inspecting"," ",e.jsx("em",{children:e.jsx(Ms,{document:n})})]}):e.jsx("em",{children:"No value"}),onClose:s,onClickOutside:s,width:3,children:e.jsxs(k,{direction:"column",height:"fill",children:[e.jsx(V,{padding:3,shadow:1,style:{position:"sticky",bottom:0,zIndex:3},children:e.jsxs(Un,{space:1,children:[e.jsx(Ce,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(J.id),label:J.title,onClick:c,selected:i===J}),e.jsx(Ce,{"aria-controls":"".concat(o,"tabpanel"),fontSize:1,id:"".concat(o,"tab-").concat(q.id),label:q.title,onClick:d,selected:i===q})]})}),e.jsxs(ks,{"aria-labelledby":"".concat(o,"tab-").concat(l),flex:1,id:"".concat(o,"tabpanel"),overflow:"auto",padding:4,style:{outline:"none"},children:[i===J&&e.jsx(Zo,{children:e.jsx(no,{data:n,isExpanded:at,onClick:Ko,search:Qo})}),i===q&&e.jsx(Te,{language:"json",tabIndex:0,onKeyDown:Xo,onDoubleClick:on,onFocus:on,children:JSON.stringify(n,null,2)})]})]})})}var ln=Object.freeze,na=Object.defineProperty,ta=(t,n)=>ln(na(t,"raw",{value:ln(n||t.slice())})),cn;const sa=A(V)(cn||(cn=ta([`
  position: relative;
  z-index: 50;
`])));function oa(t){let{revisionId:n}=t;const{documentId:s,documentType:a}=L(),{restore:o}=Os(s,a),{navigateIntent:l}=he(),r=u.useCallback(()=>{n&&(o.execute(n),l("edit",{id:s,type:a}))},[s,a,l,o,n]);return e.jsx(sa,{"data-testid":"deleted-document-banner",shadow:1,tone:"transparent",children:e.jsx(Q,{paddingX:4,paddingY:n?2:3,sizing:"border",width:1,children:e.jsxs(k,{align:"center",children:[e.jsx(D,{size:1,children:e.jsx(Jn,{})}),e.jsxs(k,{align:"center",gap:2,flex:1,marginLeft:3,children:[e.jsx(D,{size:1,children:"This document has been deleted."}),n&&e.jsx(B,{fontSize:1,padding:2,mode:"bleed",tone:"primary",onClick:r,text:"Restore most recent version"})]})]})})})}var dn=Object.freeze,aa=Object.defineProperty,it=(t,n)=>dn(aa(t,"raw",{value:dn(n||t.slice())})),un,pn;const ra=A(V)(un||(un=it([`
  position: relative;
  z-index: 50;
`]))),hn=A(D)(pn||(pn=it([`
  & > * {
    overflow: hidden;
    overflow: clip;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
`]))),lt=u.memo(()=>{var t,n,s,a,o,l;const r=wt(),{params:i,groupIndex:c,routerPanesState:d,replaceCurrent:h,BackLink:p}=re(),f=(t=d[c])==null?void 0:t[0].id,g=d[c-1],m=g==null?void 0:g[0],v=m==null?void 0:m.id,P=!!((n=m==null?void 0:m.params)!=null&&n.rev),j=u.useMemo(()=>(i==null?void 0:i.parentRefPath)&&Se(i.parentRefPath)||null,[i==null?void 0:i.parentRefPath]),x=St(()=>{const y=j==null?void 0:j[0];if(!v||!y||!j)return X({loading:!1});const w=us(v),E=Se(y),S=E.findIndex(I=>typeof I=="object"&&"_key"in I);return Vn(X({loading:!0}),r.unstable_observePathsDocumentPair(w,S===-1?E:E.slice(0,S)).pipe(ps(750),K(I=>{let{draft:R,published:M}=I;var O;return{loading:!1,result:{availability:{draft:R.availability,published:M.availability},refValue:(O=zs(R.snapshot||M.snapshot,j))==null?void 0:O._ref}}})))},[r,v,j],{loading:!0}),_=u.useCallback(()=>{var y;x.loading||(y=x.result)!=null&&y.refValue&&h({id:x.result.refValue,params:i})},[x.loading,x.result,h,i]);return!v||!j||P||x.loading||!((s=x.result)!=null&&s.availability.draft.available)&&!((a=x.result)!=null&&a.availability.published.available)||((o=x.result)==null?void 0:o.refValue)===f?null:e.jsx(ra,{shadow:1,tone:"caution","data-testid":"reference-changed-banner",children:e.jsx(Q,{paddingX:4,paddingY:2,sizing:"border",width:1,children:e.jsxs(k,{align:"center",children:[e.jsx(D,{size:1,children:e.jsx(On,{})}),(l=x.result)!=null&&l.refValue?e.jsxs(e.Fragment,{children:[e.jsx(T,{flex:1,marginLeft:3,children:e.jsx(hn,{title:"This reference has changed since you opened it.",size:1,children:"This reference has changed since you opened it."})}),e.jsx(T,{marginLeft:3,children:e.jsx(B,{onClick:_,icon:zn,fontSize:1,mode:"ghost",padding:2,space:2,text:"Reload reference"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{flex:1,marginLeft:3,children:e.jsx(hn,{title:"This reference has been removed since you opened it.",size:1,children:"This reference has been removed since you opened it."})}),e.jsx(T,{marginLeft:3,children:e.jsx(B,{as:p,icon:Ie,fontSize:1,mode:"ghost",padding:2,space:2,text:"Close reference"})})]})]})})})});lt.displayName="ReferenceChangedBanner";var fn=Object.freeze,ia=Object.defineProperty,la=(t,n)=>fn(ia(t,"raw",{value:fn(n||t.slice())})),mn;const ca=A(V)(mn||(mn=la([`
  position: relative;
  z-index: 50;
`])));function da(t){let{granted:n,requiredPermission:s}=t;var a,o;const l=Ls(),r=((a=l==null?void 0:l.roles)==null?void 0:a.length)!==1,i=ua(((o=l==null?void 0:l.roles)==null?void 0:o.map(c=>e.jsx("code",{children:c.title},c.name)))||[],", ");return n?null:e.jsx(ca,{"data-testid":"permission-check-banner",shadow:1,tone:"transparent",children:e.jsx(Q,{paddingX:4,paddingY:3,sizing:"border",width:1,children:e.jsxs(k,{align:"flex-start",children:[e.jsx(D,{size:1,children:e.jsx(Jn,{})}),e.jsx(T,{flex:1,marginLeft:3,children:e.jsxs(D,{size:1,children:["Your role",r&&"s"," ",i," ",r?"do":"does"," not have permissions to"," ",s," this document."]})})]})})})}function ua(t,n){return t.reduce((s,a)=>s===null?[a]:s.concat([n,a]),null)}function pa(t){const n=u.useRef();return u.useEffect(()=>{n.current=t},[t]),n.current}const ha=1e3*60*60*24*24;function fa(t){const n=ke(),s=pa(t.enabled);u.useEffect(()=>{!s&&t.enabled&&n.push({...t,duration:ha}),s&&!t.enabled&&n.push({...t,duration:.01})},[t,n,s])}const ma=t=>t.preventDefault(),xa=u.forwardRef(function(n,s){var a;const{hidden:o,margins:l}=n,{collapsedFieldSets:r,collapsedPaths:i,displayed:c,editState:d,documentId:h,documentType:p,fieldActions:f,onChange:g,validation:m,ready:v,formState:P,onFocus:j,onBlur:x,onSetCollapsedPath:_,onPathOpen:b,onSetCollapsedFieldSet:y,onSetActiveFieldGroup:w}=L(),E=Mn(),S=It(h),I=u.useMemo(()=>Ct(),[]),R=(a=d==null?void 0:d.transactionSyncLock)==null?void 0:a.enabled;fa({id:"sync-lock-".concat(h),status:"warning",enabled:R,title:"Syncing document…",description:"Please hold tight while the document is synced. This usually happens right after the document has been published, and it shouldn't take more than a few seconds"}),u.useEffect(()=>{const N=E.pair.documentEvents(h,p).pipe(Et(W=>{W.type==="mutation"&&I.publish(ga(W)),W.type==="rebase"&&I.publish(va(W))})).subscribe();return()=>{N.unsubscribe()}},[h,E,p,I]);const M=!!(c!=null&&c._rev);u.useEffect(()=>{M&&I.publish({type:"mutation",patches:[],snapshot:c})},[M]);const[O,C]=u.useState(null);u.useEffect(()=>{v&&!(P!=null&&P.focusPath.length)&&O&&Tt(O)},[v]);const z=u.useCallback(N=>{C(N),typeof s=="function"?s(N):s&&(s.current=N)},[s]);return e.jsx(Q,{hidden:o,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:e.jsx(Dt,{margins:l,children:e.jsx(T,{as:"form",onSubmit:ma,ref:z,children:v?P===null?e.jsx(T,{padding:2,children:e.jsx(D,{children:"This form is hidden"})}):e.jsx(Rt,{__internal_fieldActions:f,__internal_patchChannel:I,collapsedFieldSets:r,collapsedPaths:i,focusPath:P.focusPath,changed:P.changed,focused:P.focused,groups:P.groups,id:"root",members:P.members,onChange:g,onFieldGroupSelect:w,onPathBlur:x,onPathFocus:j,onPathOpen:b,onSetFieldSetCollapsed:y,onSetPathCollapsed:_,presence:S,readOnly:P.readOnly,schemaType:P.schemaType,validation:m,value:P.value}):e.jsx(Mt,{ms:300,children:e.jsxs(k,{align:"center",direction:"column",height:"fill",justify:"center",children:[e.jsx(Ln,{muted:!0}),e.jsx(T,{marginTop:3,children:e.jsx(D,{align:"center",muted:!0,size:1,children:"Loading document"})})]})})})})})});function ga(t){const n=t.mutations.map(s=>s.patch).filter(Boolean);return{type:"mutation",snapshot:t.document,patches:De(t.origin,n)}}function va(t){const n=t.remoteMutations.map(a=>a.patch).filter(Boolean),s=t.localMutations.map(a=>a.patch).filter(Boolean);return{type:"rebase",snapshot:t.document,patches:De("remote",n).concat(De("local",s))}}function ba(){const{activeViewId:t,paneKey:n,views:s}=L(),a="".concat(n,"tabpanel");return e.jsx(Un,{space:1,children:s.map((o,l)=>{var r;return e.jsx(ja,{icon:o.icon,id:"".concat(n,"tab-").concat(o.id),isActive:t===o.id,label:e.jsx(e.Fragment,{children:o.title}),tabPanelId:a,viewId:l===0?null:(r=o.id)!=null?r:null},o.id)})})}function ja(t){const{isActive:n,tabPanelId:s,viewId:a}=t,{ready:o}=L(),{setView:l}=re(),r=u.useCallback(()=>l(a),[l,a]);return e.jsx(Ce,{...t,"aria-controls":s,disabled:!o,fontSize:1,selected:n,onClick:r})}function ya(){const{connectionState:t,schemaType:n,title:s,value:a}=L(),o=!!a&&t==="connected",{error:l,value:r}=Gn({enabled:o,schemaType:n,value:a});return t!=="connected"?e.jsx(e.Fragment,{}):s?e.jsx(e.Fragment,{children:s}):a?l?e.jsxs(e.Fragment,{children:["Error: ",l.message]}):e.jsx(e.Fragment,{children:(r==null?void 0:r.title)||e.jsx("span",{style:{color:"var(--card-muted-fg-color)"},children:"Untitled"})}):e.jsxs(e.Fragment,{children:["New ",(n==null?void 0:n.title)||(n==null?void 0:n.name)]})}const _a=u.memo(u.forwardRef(function(n,s){const{onMenuAction:a,onPaneClose:o,onPaneSplit:l,menuItems:r,menuItemGroups:i,schemaType:c,timelineStore:d,ready:h,views:p,unstable_languageFilter:f}=L(),{features:g}=Y(),{index:m,BackLink:v,hasGroupSiblings:P}=re(),{actions:j}=kt(),x=u.useMemo(()=>Ot({actionHandler:a,fieldActions:j,menuItems:r,menuItemGroups:i}),[a,j,i,r]),_=u.useMemo(()=>x.filter(zt),[x]),b=u.useMemo(()=>x.filter(Lt),[x]),y=p.length>1,w=ie(d,C=>C.revTime),{collapsed:E,isLast:S}=Oe(),I=S&&!E?-1:0,R=g.splitViews&&l&&p.length>1,M=R&&P,O=!M&&!g.backButton;return e.jsx(ze,{ref:s,loading:!h,title:e.jsx(ya,{}),tabs:y&&e.jsx(ba,{}),tabIndex:I,backButton:g.backButton&&m>0&&e.jsx(B,{as:v,"data-as":"a",icon:At,mode:"bleed",padding:2}),subActions:e.jsx(Bt,{chunk:w,mode:"rev",placement:"bottom-end"}),actions:e.jsxs(k,{align:"center",gap:1,children:[f.length>0&&e.jsx(e.Fragment,{children:f.map((C,z)=>u.createElement(C,{key:"language-filter-".concat(z),schemaType:c}))}),_.map(C=>e.jsx(Nt,{node:C},C.key)),e.jsx(Wt,{nodes:b},"context-menu"),R&&e.jsx(ee,{content:e.jsx(D,{size:1,style:{whiteSpace:"nowrap"},children:"Split pane right"}),padding:2,placement:"bottom",portal:!0,children:e.jsx(B,{"aria-label":"Split pane right",icon:$t,mode:"bleed",onClick:l},"split-pane-button")}),M&&e.jsx(B,{icon:Ie,mode:"bleed",onClick:o,title:"Close split pane"},"close-view-button"),O&&e.jsx(B,{icon:Ie,mode:"bleed",title:"Close pane group",as:v},"close-view-button")]})})}));var xn=Object.freeze,Pa=Object.defineProperty,wa=(t,n)=>xn(Pa(t,"raw",{value:xn(n||t.slice())})),gn;const Sa=A(T)({position:"relative"}),Ia=A(Ft)(t=>{let{$disabled:n}=t;return n?{height:"100%"}:kn(gn||(gn=wa([`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `])))}),Ca=function(n){const{footerHeight:s,isInspectOpen:a,rootElement:o,setDocumentPanelPortalElement:l}=n,{activeViewId:r,displayed:i,documentId:c,editState:d,inspector:h,value:p,views:f,ready:g,schemaType:m,permissions:v,isPermissionsLoading:P,isDeleting:j,isDeleted:x,timelineStore:_,formState:b}=L(),{collapsed:y}=Ae(),{collapsed:w}=Oe(),E=Kn(),{features:S}=Y(),[I,R]=u.useState(null),M=xe(I),O=u.useRef(null),[C,z]=u.useState(null),N=u.useRef(null),W=p._createdAt?"update":"create",ce=u.useMemo(()=>{if(b)return b.groups.find(ne=>ne.selected)},[b]),$=u.useMemo(()=>f.find(ne=>ne.id===r)||f[0]||{type:"form"},[r,f]),G=S.splitPanes&&O.current||E.element,H=u.useMemo(()=>y?[(M==null?void 0:M.height)||0,0,s?s+2:2,0]:[0,0,2,0],[y,s,M]),ht=$.type!=="form",ft=u.useMemo(()=>$.type==="component"&&$.component&&u.createElement($.component,{document:{draft:(d==null?void 0:d.draft)||null,displayed:i||p,historical:i,published:(d==null?void 0:d.published)||null},documentId:c,options:$.options,schemaType:m}),[$,i,c,d==null?void 0:d.draft,d==null?void 0:d.published,m,p]),mt=ie(_,ne=>ne.lastNonDeletedRevId);u.useEffect(()=>{C!=null&&C.scrollTo&&C.scrollTo(0,0)},[c,C]),u.useEffect(()=>{G&&l(G)},[G,l]);const xt=u.useMemo(()=>a?e.jsx(ea,{value:i||p}):null,[a,i,p]),Ve=!!(!w&&h);return e.jsxs(e.Fragment,{children:[e.jsx(_a,{ref:R}),e.jsx(me,{children:e.jsxs(k,{height:"fill",children:[(S.resizablePanes||!Ve)&&e.jsx(Sa,{flex:2,overflow:"hidden",children:e.jsx(ge,{element:G,__unstable_elements:{documentScrollElement:C},children:e.jsx(Ge,{element:C,children:e.jsxs(hs,{scrollElement:C,containerElement:N,children:[$.type==="form"&&!P&&g&&e.jsxs(e.Fragment,{children:[e.jsx(da,{granted:!!(v!=null&&v.granted),requiredPermission:W}),!j&&x&&e.jsx(oa,{revisionId:mt}),e.jsx(lt,{})]}),e.jsxs(Ia,{$disabled:y||!1,"data-testid":"document-panel-scroller",ref:z,children:[e.jsx(xa,{hidden:ht,margins:H,ref:N},c+(g?"_ready":"_pending")),ft]},"".concat(ce==null?void 0:ce.name,"-").concat(c,"}")),xt,e.jsx("div",{"data-testid":"document-panel-portal",ref:O})]})})})}),Ve&&e.jsx(Ge,{element:o,children:e.jsx(po,{documentId:c,documentType:m.name,flex:1})})]})})]})},ct=["left","bottom"],Ea={small:0,medium:1,large:2,full:"auto"};function Ta(t){const{dialog:n,referenceElement:s}=t;return e.jsx(qn,{content:e.jsx(Da,{dialog:n}),fallbackPlacements:ct,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function Da(t){const{dialog:n}=t,{cancelButtonIcon:s,cancelButtonText:a,confirmButtonIcon:o,confirmButtonText:l,message:r,onCancel:i,onConfirm:c,tone:d}=n,{isTopLayer:h}=Zn(),[p,f]=u.useState(null),g=u.useCallback(()=>{h&&i()},[h,i]),m=u.useCallback(v=>{v.key==="Escape"&&h&&i()},[h,i]);return Qn(g,[p]),et(m),e.jsxs(k,{direction:"column",ref:f,style:{minWidth:320-16,maxWidth:400},children:[e.jsx(T,{flex:1,overflow:"auto",padding:4,children:e.jsx(D,{children:r})}),e.jsx(T,{paddingX:4,paddingY:3,style:{borderTop:"1px solid var(--card-border-color)"},children:e.jsxs(Js,{columns:2,gap:2,children:[e.jsx(B,{icon:s,onClick:i,mode:"ghost",text:a||"Cancel"}),e.jsx(B,{icon:o,onClick:c,text:l||"Confirm",tone:d})]})})]})}function Ra(t){const{dialog:n}=t,s=u.useId(),a=n.footer&&e.jsx(T,{paddingX:4,paddingY:3,children:n.footer});return e.jsx(Be,{zOffset:"fullscreen",children:e.jsx(We,{__unstable_hideCloseButton:n.showCloseButton===!1,footer:a,header:n.header,id:s,onClose:n.onClose,onClickOutside:n.onClose,width:n.width===void 0?1:Ea[n.width],children:e.jsx(T,{padding:4,children:n.content})})})}function Ma(t){const{dialog:n,referenceElement:s}=t;return e.jsx(qn,{content:e.jsx(ka,{dialog:n}),fallbackPlacements:ct,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:s})}function ka(t){const{dialog:n}=t,{content:s,onClose:a}=n,{isTopLayer:o}=Zn(),[l,r]=u.useState(null),i=u.useCallback(()=>{o&&a()},[o,a]),c=u.useCallback(d=>{d.key==="Escape"&&o&&a()},[o,a]);return Qn(i,[l]),et(c),e.jsx("div",{ref:r,children:s})}function vn(t){const{children:n}=t,{element:s,elements:a}=Kn(),o=(a==null?void 0:a[Nn])||s;return e.jsx(ge,{element:o,children:n})}function Fe(t){const{dialog:n,referenceElement:s=null}=t,a=u.useId();if(n.type==="confirm")return e.jsx(Ta,{dialog:n,referenceElement:s});if(n.type==="popover")return e.jsx(Ma,{dialog:n,referenceElement:s});if(n.type==="dialog"||!n.type)return e.jsx(vn,{children:e.jsx(Ra,{dialog:n})});if(n.type==="custom")return e.jsx(vn,{children:n==null?void 0:n.component});const o=n;return console.warn("Unsupported modal type ".concat(o.type)),e.jsx(We,{id:a,onClose:o.onClose,onClickOutside:o.onClose,width:2,children:e.jsx(T,{padding:4,children:o.content||e.jsxs(e.Fragment,{children:["Unexpected modal type (",e.jsx("code",{children:o.type}),")"]})})})}function Oa(t){const{actionStates:n,disabled:s}=t,a=u.useId(),o=u.useRef(null),[l,r]=u.useState(-1),[i,c]=u.useState(null),d=u.useCallback(f=>{r(f)},[]),h=u.useMemo(()=>({placement:"top-end",portal:!0,preventOverflow:!0}),[]),p=n[l];return e.jsxs(e.Fragment,{children:[e.jsx(As,{id:"".concat(a,"-action-menu"),button:e.jsx(B,{"data-testid":"action-menu-button","aria-label":"Open document actions",disabled:s,icon:Bs,mode:"ghost",ref:o}),menu:e.jsx(Ns,{padding:1,children:n.map((f,g)=>e.jsx(za,{actionState:f,disabled:s,index:g,onAction:d},g))}),popover:h,ref:c}),p&&p.dialog&&e.jsx(Be,{zOffset:"paneFooter",children:e.jsx(Fe,{dialog:p.dialog,referenceElement:i})})]})}function za(t){const{actionState:n,disabled:s,index:a,onAction:o}=t,{onHandle:l}=n,r=u.useCallback(()=>{o(a),l&&l()},[a,o,l]),i=n.title&&e.jsx(T,{padding:2,children:e.jsx(D,{size:1,children:n.title})});return e.jsx(Ws,{"data-testid":"action-".concat(n.label.replace(" ","")),disabled:s||!!n.disabled,onClick:r,padding:0,tone:n.tone,children:e.jsx(ee,{content:i,disabled:!i,fallbackPlacements:["left","bottom"],placement:"top",portal:!0,children:e.jsxs(k,{align:"center",paddingX:3,children:[e.jsxs(k,{flex:1,paddingY:3,children:[n.icon&&e.jsx(T,{marginRight:3,children:e.jsxs(D,{children:[u.isValidElement(n.icon)&&n.icon,$s.isValidElementType(n.icon)&&u.createElement(n.icon)]})}),e.jsx(D,{children:n.label})]}),n.shortcut&&e.jsx(T,{marginLeft:3,children:e.jsx(Xn,{keys:String(n.shortcut).split("+").map(c=>c.slice(0,1).toUpperCase()+c.slice(1))})})]})})})}function dt(t){const{disabled:n,showMenu:s,states:a}=t,[o,...l]=a,[r,i]=u.useState(null),c=u.useMemo(()=>!o||!o.title&&!o.shortcut?null:e.jsxs(k,{padding:2,style:{maxWidth:300},align:"center",children:[e.jsx(D,{size:1,children:o.title}),o.shortcut&&e.jsx(T,{marginLeft:o.title?2:0,children:e.jsx(Xn,{keys:String(o.shortcut).split("+").map(d=>d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase())})})]}),[o]);return e.jsxs(k,{children:[o&&e.jsx(fs,{zOffset:200,children:e.jsx(ee,{disabled:!c,content:c,portal:!0,placement:"top",children:e.jsx(U,{flex:1,children:e.jsx(B,{"data-testid":"action-".concat(o.label),disabled:n||!!o.disabled,icon:o.icon,onClick:o.onHandle,ref:i,text:o.label,tone:o.tone||"primary"})})})}),s&&l.length>0&&e.jsx(T,{marginLeft:1,children:e.jsx(Oa,{actionStates:l,disabled:n})}),o&&o.dialog&&e.jsx(Fe,{dialog:o.dialog,referenceElement:r})]})}const La=u.memo(function(){const{actions:n,connectionState:s,documentId:a,editState:o}=L();return!n||!o?null:e.jsx($e,{actions:n,actionProps:o,children:l=>{let{states:r}=l;return e.jsx(dt,{disabled:s!=="connected",showMenu:n.length>1,states:r},a)}})}),Aa=u.memo(function(){const{connectionState:n,editState:s,timelineStore:a}=L(),o=ie(a,d=>d.revTime),l=(o==null?void 0:o.id)||"",r=((s==null?void 0:s.draft)||(s==null?void 0:s.published)||{})._rev===l,i=u.useMemo(()=>({...s||{},revision:l}),[s,l]),c=u.useMemo(()=>[Ht],[]);return e.jsx($e,{actions:c,actionProps:i,children:d=>{let{states:h}=d;return e.jsx(dt,{disabled:n!=="connected"||!!r,showMenu:!1,states:h})}})}),Ba={primary:"primary",success:"positive",warning:"caution",danger:"critical"};function Na(t){let{states:n}=t;return e.jsx(Fs,{space:1,children:n.map((s,a)=>e.jsx(ee,{content:s.title&&e.jsx(T,{padding:2,children:e.jsx(D,{size:1,children:s.title})}),disabled:!s.title,placement:"top",portal:!0,children:e.jsx(Hs,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:s.color?Ba[s.color]:void 0,style:{whiteSpace:"nowrap"},children:s.label})},String(a)))})}function Wa(){const{badges:t,editState:n}=L();return!n||!t?null:e.jsx(so,{badges:t,badgeProps:n,children:s=>{let{states:a}=s;return e.jsx(Na,{states:a})}})}var bn=Object.freeze,$a=Object.defineProperty,Fa=(t,n)=>bn($a(t,"raw",{value:bn(n||t.slice())})),jn;const Ha=A(k)(jn||(jn=Fa([`
  cursor: default;
`])));function Va(t){const{collapsed:n,disabled:s,lastPublished:a,lastUpdated:o,liveEdit:l}=t,r=F(a||"",{minimal:!0,agoSuffix:!0}),i=F(a||"",{minimal:!0}),c=F(o||"",{minimal:!0,agoSuffix:!0}),d=F(o||"",{minimal:!0}),h=F(o||"",{minimal:!1,agoSuffix:!0}),p=F(a||"",{minimal:!1,agoSuffix:!0}),f=l?"Last updated ".concat(h):"Last published ".concat(p);return e.jsx(Ha,{align:"center","data-ui":"SessionLayout",sizing:"border",children:e.jsx(ee,{placement:"top",portal:!0,content:e.jsx(U,{padding:3,space:3,children:e.jsx(D,{size:1,children:l?e.jsxs(e.Fragment,{children:["Last updated"," ",e.jsx("abbr",{"aria-label":o?h:p,children:o?c:r})]}):e.jsxs(e.Fragment,{children:["Last published ",e.jsx("abbr",{"aria-label":p,children:r})]})})}),children:e.jsx(B,{mode:"bleed",tone:l?"critical":"positive",tabIndex:-1,disabled:s,"aria-label":f,children:e.jsxs(k,{align:"center",children:[e.jsx(T,{marginRight:n?0:3,children:e.jsx(D,{size:2,"aria-hidden":"true",children:l?e.jsx(ms,{}):e.jsx(xs,{})})}),!n&&e.jsx(D,{size:1,weight:"medium",children:l?e.jsx("abbr",{"aria-label":f,children:o?d:i}):e.jsx("abbr",{"aria-label":f,children:i})})]})})})})}var yn=Object.freeze,Ua=Object.defineProperty,He=(t,n)=>yn(Ua(t,"raw",{value:yn(n||t.slice())})),_n,Pn,wn;const Ga=A(le.path)(_n||(_n=He([`
  transform-origin: center;
`]))),Ka=t=>e.jsx(le.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...t}),Xa=t=>e.jsx(Ga,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...t}),Ya=t=>e.jsx(le.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...t}),Ja=t=>e.jsx(le.path,{d:"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z",...t}),qa=Vt(Pn||(Pn=He([`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`]))),Za=A.g(wn||(wn=He([`
  transform-origin: center;

  &[data-rotate] {
    animation: `,` 1s ease-in-out infinite;
  }
`])),qa),Qa={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},er={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},nr={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},tr={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}},sr={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:0,transition:{duration:0}},changes:{pathLength:1,transition:{duration:.4,delay:.5}}};function or(t){const{status:n}=t;return n?e.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"",children:e.jsxs(le.g,{variants:Qa,initial:n,animate:n,children:[e.jsxs(Za,{"data-rotate":n==="changes"?void 0:"",children:[e.jsx(Xa,{variants:nr,initial:n,animate:n}),e.jsx(Ka,{variants:er,initial:n,animate:n})]}),e.jsx(Ya,{variants:tr,initial:n,animate:n}),e.jsx(Ja,{variants:sr,initial:n,animate:n})]})}):null}const ar=Le.forwardRef(function(n,s){const{collapsed:a,status:o,lastUpdated:l,...r}=n,i=F(l||"",{minimal:!0}),c=F(l||"",{minimal:!0,agoSuffix:!0}),d=F(l||"",{minimal:!1,agoSuffix:!0}),h=u.useMemo(()=>o==="syncing"?{text:"Saving...",tone:void 0}:o==="changes"?{text:i,tone:"caution"}:o==="saved"?{text:"Saved!",tone:"positive"}:{},[o,i]);return o?e.jsx(ee,{placement:"top",portal:!0,disabled:o!=="changes",content:e.jsxs(U,{padding:3,space:3,children:[e.jsx(D,{size:1,weight:"semibold",children:"Review changes"}),e.jsxs(D,{size:1,muted:!0,children:["Changes saved ",e.jsx("abbr",{"aria-label":d,children:c})]})]}),children:e.jsx(B,{mode:"bleed",justify:"flex-start",tone:h==null?void 0:h.tone,...r,"data-testid":"review-changes-button",ref:s,"aria-label":"Review changes",children:e.jsxs(k,{align:"center",children:[e.jsx(T,{marginRight:a?0:3,"aria-hidden":"true",children:e.jsx(D,{children:e.jsx(or,{status:o})})}),!a&&e.jsx(D,{size:1,weight:"medium",children:h==null?void 0:h.text})]})})}):null}),rr=Le.memo(ar),ir=1e3,lr=3e3,cr=u.memo(function(){var n;const{changesOpen:s,documentId:a,documentType:o,editState:l,onHistoryClose:r,onHistoryOpen:i,timelineStore:c,value:d}=L(),h=Ut(a,o),p=d==null?void 0:d._updatedAt,f=(n=l==null?void 0:l.published)==null?void 0:n._updatedAt,g=!!(l!=null&&l.liveEdit),m=!!(l!=null&&l.published),v=!!(l!=null&&l.draft),[P,j]=u.useState(null),x=xe(P),_=!x||(x==null?void 0:x.width)<300,[b,y]=u.useState(null),w=ie(c,I=>I.onOlderRevision);u.useEffect(()=>{if(b==="syncing"&&!h.isSyncing){const I=setTimeout(()=>y("saved"),ir);return()=>clearTimeout(I)}if(b==="saved"){const I=setTimeout(()=>y(null),lr);return()=>clearTimeout(I)}},[b,p,h.isSyncing]),u.useLayoutEffect(()=>{y(null)},[a]),u.useLayoutEffect(()=>{h.isSyncing&&y("syncing")},[h.isSyncing,p]);const E=u.useMemo(()=>e.jsx(rr,{lastUpdated:p,status:b||(v?"changes":void 0),onClick:s?r:i,disabled:w,selected:s,collapsed:_}),[v,s,r,i,p,w,b,_]),S=u.useMemo(()=>(g||m)&&e.jsx(T,{marginRight:1,children:e.jsx(Va,{disabled:w,lastPublished:f,lastUpdated:p,liveEdit:g,collapsed:_})}),[_,f,p,g,m,w]);return e.jsxs(k,{align:"center","data-ui":"DocumentSparkline",ref:j,children:[S,e.jsxs(k,{align:"center",flex:1,children:[E,!_&&e.jsx(T,{marginLeft:3,children:e.jsx(Wa,{})})]})]})});var Sn=Object.freeze,dr=Object.defineProperty,ur=(t,n)=>Sn(dr(t,"raw",{value:Sn(n||t.slice())})),In;const pr=A(T)(In||(In=ur([`
  min-width: 10em;
  max-width: 16em;
`])));function hr(t){const{actionsBoxRef:n}=t,{badges:s,timelineStore:a}=L(),o=ie(a,l=>l.onOlderRevision);return u.useMemo(()=>e.jsx(T,{paddingLeft:2,paddingRight:[2,3],paddingY:2,children:e.jsxs(k,{align:"center",children:[e.jsx(T,{flex:[1,2],children:s&&e.jsx(cr,{})}),e.jsx(pr,{flex:1,marginLeft:[1,3],ref:n,children:o?e.jsx(Aa,{}):e.jsx(La,{})})]})}),[n,s,o])}function fr(t){const{actionsBoxElement:n,activeIndex:s,as:a="div",children:o,id:l,onActionStart:r,onKeyDown:i,rootRef:c,states:d,...h}=t,p=d[s],f=u.useCallback(g=>{const m=d.filter(P=>P.shortcut&&Wn(P.shortcut,g)),v=m[0];if(m.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(v.shortcut,'"')),v&&!v.disabled&&v.onHandle){g.preventDefault(),v.onHandle(),r(d.indexOf(v));return}i&&i(g)},[r,i,d]);return u.createElement(a,{id:l,onKeyDown:f,tabIndex:-1,...h,ref:c},[o,p&&p.dialog&&e.jsx(Be,{zOffset:"paneFooter",children:e.jsx(Fe,{dialog:p.dialog,referenceElement:n})})])}const ut=Le.memo(t=>{const{actionsBoxElement:n,as:s="div",children:a,...o}=t,{actions:l,editState:r}=L(),[i,c]=u.useState(-1),d=u.useCallback(p=>{c(p)},[]),h=u.useMemo(()=>r&&{...r,onComplete:()=>{},revision:void 0},[r]);return!h||!l?null:e.jsx($e,{actionProps:h,actions:l,children:p=>{let{states:f}=p;return e.jsx(fr,{...o,activeIndex:i,actionsBoxElement:n,as:s,onActionStart:d,states:f,children:a})}})});ut.displayName="DocumentActionShortcuts";var Cn=Object.freeze,mr=Object.defineProperty,xr=(t,n)=>Cn(mr(t,"raw",{value:Cn(n||t.slice())})),En;const Tn=["fixed","fixed","absolute"],gr=A(Gt)(En||(En=xr([`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`]))),zr=u.memo(function(n){const{name:s}=An();return e.jsx(Bn,{name:n.pane.source||s,children:e.jsx(vr,{...n})})});function vr(t){var n;const{pane:s,paneKey:a}=t,{resolveNewDocumentOptions:o}=An().document,l=re(),r=br(s.options,l.params),{documentType:i,isLoaded:c}=Kt(r.id,r.type),d=u.useMemo(()=>o({type:"document",documentId:r.id,schemaType:r.type}),[r.id,r.type,o]),[h,p]=Xt({templateItems:d}),f=c&&!p,g=u.useMemo(()=>f&&i&&r.type!==i?jr(t,r,i):t,[t,i,f,r]),{ReferenceChildLink:m,handleEditReference:v,groupIndex:P,routerPanesState:j}=l,x=((n=j[P+1])==null?void 0:n[0].params)||{},_=j.length,{parentRefPath:b}=x,y=u.useMemo(()=>b?{path:Se(b),state:P>=_-1?"none":P>=_-2?"selected":"pressed"}:{path:[],state:"none"},[b,P,_]);return r.type==="*"&&!f?e.jsx(oe,{flex:2.5,minWidth:320,paneKey:a,title:"Loading document…"}):i?e.jsx(Yt,{...g,children:e.jsx(Jt,{EditReferenceLinkComponent:m,onEditReference:v,initialValueTemplateItems:h,activePath:y,children:e.jsx(yr,{})})},"".concat(i,"-").concat(r.id)):e.jsx(ot,{flex:2.5,minWidth:320,paneKey:a,title:e.jsx(e.Fragment,{children:"The document was not found"}),children:e.jsx(U,{space:4,children:e.jsxs(D,{as:"p",children:["The document type is not defined, and a document with the ",e.jsx("code",{children:r.id})," ","identifier could not be found."]})})})}function br(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=qt();return u.useMemo(()=>{if(t.type&&t.type!=="*")return t;const a=t.template||n.template,o=a?s.find(r=>r.id===a):void 0,l=o==null?void 0:o.schemaType;return l?{...t,type:l}:t},[t,n.template,s])}function jr(t,n,s){return{...t,pane:{...t.pane,options:{...n,type:s}}}}function yr(){const{changesOpen:t,documentType:n,inspector:s,inspectOpen:a,onFocus:o,onPathOpen:l,onHistoryOpen:r,onKeyUp:i,paneKey:c,schemaType:d,value:h}=L(),{collapsed:p}=Ae(),f=Zt(),[g,m]=u.useState(null),[v,P]=u.useState(null),[j,x]=u.useState(null),[_,b]=u.useState(null),y=xe(v),w=y==null?void 0:y.height,E=u.useCallback(R=>{l(R),o(R)},[l,o]),S=gs+(s?Ee:0),I=vs+(s?Ee:0);return d?e.jsxs(ut,{actionsBoxElement:j,as:fe,currentMinWidth:S,"data-testid":"document-pane",flex:2.5,id:c,minWidth:I,onKeyUp:i,rootRef:m,children:[e.jsx(Ue,{position:Tn,zOffset:f.portal,children:e.jsx(k,{direction:"column",flex:1,height:p?void 0:"fill",children:e.jsx(gr,{"data-testid":"change-connector-root",isReviewChangesOpen:t,onOpenReviewChanges:r,onSetFocus:E,children:e.jsx(Ca,{footerHeight:w||null,isInspectOpen:a,rootElement:g,setDocumentPanelPortalElement:b})})})}),e.jsx(ge,{__unstable_elements:{[Nn]:_},children:e.jsx(Ue,{position:Tn,zOffset:f.portal,children:e.jsx(es,{ref:P,children:e.jsx(hr,{actionsBoxRef:x})})})}),e.jsx(Vo,{})]}):e.jsx(ot,{currentMinWidth:S,flex:2.5,minWidth:I,paneKey:c,title:e.jsxs(e.Fragment,{children:["Unknown document type: ",e.jsx("code",{children:n})]}),tone:"caution",children:e.jsxs(U,{space:4,children:[n&&e.jsxs(D,{as:"p",children:["This document has the schema type ",e.jsx("code",{children:n}),", which is not defined as a type in the local content studio schema."]}),!n&&e.jsx(D,{as:"p",children:"This document does not exist, and no schema type was specified for it."}),Qt]})})}function _r(){return e.jsx(V,{height:"fill",children:e.jsx(k,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:e.jsx(Q,{width:0,children:e.jsx(V,{padding:4,radius:2,shadow:1,tone:"caution",children:e.jsxs(k,{children:[e.jsx(T,{children:e.jsx(D,{size:1,children:e.jsx(On,{})})}),e.jsxs(U,{flex:1,marginLeft:3,space:3,children:[e.jsx(D,{as:"h1",size:1,weight:"bold",children:"No document types"}),e.jsx(D,{as:"p",muted:!0,size:1,children:"Please define at least one document type in your schema."}),e.jsx(D,{as:"p",muted:!0,size:1,children:e.jsx("a",{href:"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio",target:"_blank",rel:"noreferrer",children:"Learn how to add a document type →"})})]})]})})})})})}const Pr=t=>{const{documentId:n,documentType:s}=t,a=Vs(n,s),o=$n(),l=!(a!=null&&a.published)&&!(a!=null&&a.draft),r=(a==null?void 0:a.draft)||(a==null?void 0:a.published),i=o.get(s),{value:c,isLoading:d}=Gn({enabled:!0,schemaType:i,value:r}),h=l?"New ".concat((i==null?void 0:i.title)||(i==null?void 0:i.name)):(c==null?void 0:c.title)||"Untitled",p=a.ready&&!d,f=pt(h);return u.useEffect(()=>{p&&(document.title=f)},[h,p,f]),null},Pe=t=>{const{title:n}=t,s=pt(n);return u.useEffect(()=>{document.title=s},[s,n]),null},wr=t=>{const{resolvedPanes:n}=t;if(!(n!=null&&n.length))return null;const s=n[n.length-1];return Ir(s)?e.jsx(Pe,{}):Sr(s)?s!=null&&s.title?e.jsx(Pe,{title:s.title}):e.jsx(Pr,{documentId:s.options.id,documentType:s.options.type}):e.jsx(Pe,{title:s==null?void 0:s.title})};function pt(t){const n=Y().structureContext.title;return[t,n].filter(s=>s).join(" | ")}function Sr(t){return t!==se&&t.type==="document"}function Ir(t){return t===se}var Dn=Object.freeze,Cr=Object.defineProperty,Er=(t,n)=>Dn(Cr(t,"raw",{value:Dn(n||t.slice())})),Rn;const Tr=A(uo)(Rn||(Rn=Er([`
  min-height: 100%;
  min-width: 320px;
`]))),Dr=Wn("mod+s"),Rr=u.memo(function(n){let{onPaneChange:s}=n;var a;const{push:o}=ke(),l=$n(),{layoutCollapsed:r,setLayoutCollapsed:i}=Y(),{paneDataItems:c,resolvedPanes:d}=wo(),h=Me(u.useCallback(j=>typeof j.intent=="string",[])),{sanity:{media:p}}=ns(),[f,g]=u.useState(null),m=u.useCallback(()=>i(!0),[i]),v=u.useCallback(()=>i(!1),[i]);return u.useEffect(()=>{d.length&&s(d)},[s,d]),u.useEffect(()=>{const j=x=>{Dr(x)&&(x.preventDefault(),o({closable:!0,id:"auto-save-message",status:"info",title:"Your work is automatically saved!",duration:4e3}))};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[o]),((a=l._original)==null?void 0:a.types.some(ts))?e.jsxs(ge,{element:f||null,children:[e.jsxs(Tr,{flex:1,height:r?void 0:"fill",minWidth:p[1],onCollapse:m,onExpand:v,children:[c.map(j=>{let{active:x,childItemId:_,groupIndex:b,itemId:y,key:w,pane:E,index:S,params:I,path:R,payload:M,siblingIndex:O,selected:C}=j;return e.jsx(u.Fragment,{children:E===se?e.jsx(oe,{paneKey:w,path:R,selected:C}):e.jsx(Wo,{active:x,groupIndex:b,index:S,pane:E,childItemId:_,itemId:y,paneKey:w,params:I,payload:M,path:R,selected:C,siblingIndex:O})},"".concat(E===se?"loading":E.type,"-").concat(S))}),c.length<=1&&h&&e.jsx(oe,{paneKey:"intent-resolver"})]}),e.jsx(wr,{resolvedPanes:d}),e.jsx("div",{"data-portal":"",ref:g})]}):e.jsx(_r,{})});function Mr(t){let{tool:{options:n}}=t;const{unstable_sources:s}=bs(),[a]=s,{source:o,defaultDocumentNode:l,structure:r}=n||{};u.useEffect(()=>(be([]),()=>be([])),[]);const[{error:i},c]=u.useState({error:null});return i?e.jsx(Mo,{error:i}):e.jsx(js,{onCatch:c,children:e.jsx(Bn,{name:o||a.name,children:e.jsxs(ys,{defaultDocumentNode:l,structure:r,children:[e.jsx(Rr,{onPaneChange:be}),e.jsx(Co,{})]})})})}var Lr=Object.freeze({__proto__:null,default:Mr});export{zr as DocumentPane,Lr as index,Uo as useDeskToolSetting};
